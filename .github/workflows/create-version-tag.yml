name: Create Release tag
on:
   pull_request:
    types: closed
   push:
   workflow_dispatch:

env:
   PR_NUMBER: ${{ github.event.number }}

jobs:
  create-tag:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest

    steps:
    - name: Checkout source code
      uses: actions/checkout@v2
      
    - name: update semver tag
      id: semver_tag
      run: |
        chmod 755 semver_tag.sh
        echo "::set-output name=TAG_NAME::$(${{ github.workspace }}/semver_tag.sh $PR_NUMBER)"
